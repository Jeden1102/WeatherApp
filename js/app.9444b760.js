(function(t){function e(e){for(var i,r,o=e[0],s=e[1],d=e[2],p=0,f=[];p<o.length;p++)r=o[p],Object.prototype.hasOwnProperty.call(a,r)&&a[r]&&f.push(a[r][0]),a[r]=0;for(i in s)Object.prototype.hasOwnProperty.call(s,i)&&(t[i]=s[i]);u&&u(e);while(f.length)f.shift()();return c.push.apply(c,d||[]),n()}function n(){for(var t,e=0;e<c.length;e++){for(var n=c[e],i=!0,o=1;o<n.length;o++){var s=n[o];0!==a[s]&&(i=!1)}i&&(c.splice(e--,1),t=r(r.s=n[0]))}return t}var i={},a={app:0},c=[];function r(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=t,r.c=i,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],s=o.push.bind(o);o.push=e,o=o.slice();for(var d=0;d<o.length;d++)e(o[d]);var u=s;c.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"0022":function(t,e,n){},"0420":function(t,e,n){t.exports=n.p+"media/03n.d323b925.mp4"},"0698":function(t,e,n){t.exports=n.p+"media/09n.dd9c4f11.mp4"},"0cff":function(t,e,n){t.exports=n.p+"media/10n.dd9c4f11.mp4"},"0da8":function(t,e,n){t.exports=n.p+"media/04d.fbf57056.mp4"},"192c":function(t,e,n){},"417e":function(t,e,n){t.exports=n.p+"media/11d.dd9c4f11.mp4"},4371:function(t,e,n){"use strict";n("7c53")},"4c58":function(t,e,n){t.exports=n.p+"media/02n.d323b925.mp4"},"54ef":function(t,e,n){t.exports=n.p+"media/13d.7d6eb41b.mp4"},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var i=n("2b0e"),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"main"},[n("Navigation",{attrs:{addCityActive:t.addCityActive,isDay:t.isDay,isNight:t.isNight},on:{"add-city":function(e){t.modalOpen=!t.modalOpen},"edit-city":function(e){t.edit=!t.edit}}}),t.modalOpen?n("Modal",{on:{"close-modal":function(e){t.modalOpen=!t.modalOpen}}}):t._e(),n("router-view",{attrs:{cities:t.cities,edit:t.edit},on:{"is-day":function(e){t.isDay=!t.isDay},"is-night":function(e){t.isNight=!t.isNight},resetDays:t.resetDays}})],1)},c=[],r=n("1da1"),o=(n("96cf"),n("d3b7"),n("159b"),n("99af"),n("4de4"),n("b0c0"),n("bc3a")),s=n.n(o),d=n("4f60"),u=(n("1862"),n("256a"),{apiKey:"AIzaSyARlD1cYBjeuuDrA051qI28sVmpUJQuGSs",authDomain:"weatherapp-b3c48.firebaseapp.com",projectId:"weatherapp-b3c48",storageBucket:"weatherapp-b3c48.appspot.com",messagingSenderId:"863544097692",appId:"1:863544097692:web:6a972ebef53b97ff0b6659"}),p=d["a"].initializeApp(u),f=p.firestore(),l=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.addCityActive?n("header",{staticClass:"container add-city"},[n("nav",[n("span",[t._v("Add City")]),n("div",{staticClass:"right"},[n("i",{ref:"editCities",staticClass:"far fa-edit",on:{click:t.editCity}}),n("i",{staticClass:"fas fa-sync",on:{click:t.reloadApp}}),n("i",{staticClass:"fas fa-plus",on:{click:t.addCity}})])])]):t._e(),t.addCityActive?t._e():n("header",{staticClass:"container",class:{day:t.isDay,night:t.isNight}},[n("nav",[n("router-link",{staticClass:"router-link",attrs:{to:{name:"AddCity"}}},[n("i",{staticClass:"fas fa-times-circle"})]),n("span",[t._v(" "+t._s((new Date).toLocaleString())+" ")]),n("span",[t._v(" °C ")])],1)])])},m=[],h={name:"Navigation",props:["addCityActive","isDay","isNight"],methods:{addCity:function(){this.$emit("add-city")},reloadApp:function(){location.reload()},editCity:function(){this.$refs.editCities.classList.toggle("edit-active"),this.$emit("edit-city")}}},y=h,v=(n("ed81"),n("2877")),b=Object(v["a"])(y,l,m,!1,null,"41338c2f",null),g=b.exports,C=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"modal",staticClass:"modal",on:{click:t.closeModal}},[n("div",{ref:"modalWrap",staticClass:"modal-wrap"},[n("label",{attrs:{for:"city-name"}},[t._v("Enter Location:")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.city,expression:"city"}],attrs:{type:"text",name:"city-name",placeholder:"Warszawa/Warsaw"},domProps:{value:t.city},on:{input:function(e){e.target.composing||(t.city=e.target.value)}}}),n("button",{on:{click:t.addCity}},[t._v("Add")])])])},w=[],x={name:"modal",data:function(){return{city:null,apiKey:"ffce0cb1622ed4c6cc1ba7238e3dd846"}},methods:{closeModal:function(t){t.target===this.$refs.modal&&this.$emit("close-modal")},addCity:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(0!=t.city.length){e.next=2;break}return e.abrupt("return",!1);case 2:return e.next=4,s.a.get("https://api.openweathermap.org/data/2.5/weather?q=".concat(t.city,"&units=imperial&appid=").concat(t.apiKey,"&lang=pl"));case 4:return n=e.sent,e.next=7,n.data;case 7:i=e.sent,f.collection("cities").doc().set({city:t.city,currentWeather:i}).then((function(){t.$emit("close-modal")}));case 9:case"end":return e.stop()}}),e)})))()}}},_=x,O=(n("db0b"),Object(v["a"])(_,C,w,!1,null,"b50dd64e",null)),k=O.exports,W={name:"App",components:{Navigation:g,Modal:k},data:function(){return{isDay:null,isNight:null,apiKey:"ffce0cb1622ed4c6cc1ba7238e3dd846",cities:[],modalOpen:!1,edit:!1,addCityActive:null}},methods:{getCityWeather:function(){var t=this,e=f.collection("cities");e.onSnapshot((function(n){n.docChanges().forEach(function(){var n=Object(r["a"])(regeneratorRuntime.mark((function n(i){var a,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if("added"!==i.type||i.doc.Nd){n.next=14;break}return n.prev=1,n.next=4,s.a.get("https://api.openweathermap.org/data/2.5/weather?q=".concat(i.doc.data().city,"&units=imperial&appid=").concat(t.apiKey,"&lang=pl"));case 4:a=n.sent,c=a.data,e.doc(i.doc.id).update({currentWeather:c}).then((function(){t.cities.push(i.doc.data())})),n.next=12;break;case 9:n.prev=9,n.t0=n["catch"](1),console.log(n.t0);case 12:n.next=15;break;case 14:"added"===i.type&&i.doc.Nd?t.cities.push(i.doc.data()):"removed"===i.type&&(t.cities=t.cities.filter((function(t){return t.city!==i.doc.data().city})));case 15:case"end":return n.stop()}}),n,null,[[1,9]])})));return function(t){return n.apply(this,arguments)}}())}))},resetDays:function(){this.isDay=!1,this.isNight=!1},checkRoute:function(){"AddCity"===this.$route.name?this.addCityActive=!0:this.addCityActive=!1}},watch:{$route:function(){this.checkRoute()}},mounted:function(){this.checkRoute(),this.getCityWeather()}},D=W,$=(n("5c0b"),Object(v["a"])(D,a,c,!1,null,null,null)),A=$.exports,j=n("8c4f"),N=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"grid"},t._l(t.cities,(function(e,i){return n("div",{key:i,staticClass:"city-link"},[n("City",{attrs:{city:e,edit:t.edit}})],1)})),0)},E=[],T=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"city",on:{click:t.goToWeather}},[t.edit?i("i",{ref:"edit",staticClass:"far fa-trash-alt edit",on:{click:t.removeCity}}):t._e(),i("span",[t._v(t._s(t.city.city))]),i("div",{staticClass:"weather"},[i("span",[t._v(t._s(Math.round((this.city.currentWeather.main.temp-32)/1.8))+"°")]),i("img",{attrs:{src:"http://openweathermap.org/img/wn/"+t.city.currentWeather.weather[0].icon+"@2x.png",alt:""}})]),i("div",{staticClass:"video"},[i("video",{attrs:{autoplay:"",muted:"",loop:"",src:n("f3b4")("./"+t.city.currentWeather.weather[0].icon+".mp4")},domProps:{muted:!0}}),i("div",{staticClass:"bg-overlay"})])])},M=[],S={name:"city",props:["city","edit"],created:function(){console.log(this.city)},data:function(){return{id:null}},methods:{removeCity:function(){var t=this;f.collection("cities").where("city","==","".concat(this.city.city)).get().then((function(e){e.forEach((function(e){t.id=e.id}))})).then((function(){f.collection("cities").doc(t.id).delete()}))},goToWeather:function(t){t.target===this.$refs.edit||this.$router.push({name:"Weather",params:{city:this.city.city}})}}},P=S,R=(n("4371"),Object(v["a"])(P,T,M,!1,null,"77686dc0",null)),K=R.exports,I={name:"AddCity",props:["cities","edit"],created:function(){},components:{City:K}},L=I,q=(n("777a"),Object(v["a"])(L,N,E,!1,null,"28c438ab",null)),z=q.exports,H=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},J=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h4",[t._v("Weather")])])}],U={name:"Weather",data:function(){return{forecast:null,currentWeather:null,currentTime:null,loading:!0,apiKey:"ffce0cb1622ed4c6cc1ba7238e3dd846"}},methods:{getWeather:function(){var t=this;f.collection("cities").where("city","==","".concat(this.$route.params.city)).get().then((function(e){e.forEach((function(e){t.currentWeather=e.data().currentWeather,s.a.get("https://api.openweathermap.org/data/2.5/onecall?lat=".concat(t.currentWeather.coord.lat,"&lon=").concat(t.currentWeather.coord.lon,"&exclude=current,minutely&appid=").concat(t.apiKey)).then((function(e){t.forecast=e.data})).then((function(){t.loading=!1,t.getCurrentTime()}))}))}))},getCurrentTime:function(){var t=new Date;this.currentTime=t.getHours();var e=new Date(1e3*this.currentWeather.sys.sunrise).getHours(),n=new Date(1e3*this.currentWeather.sys.sunset).getHours();this.currentTime>e&&this.currentTime<n?this.$emit("is-day"):this.$emit("is-night")}},mounted:function(){this.getWeather()},beforeDestroy:function(){this.$emit("resetDays")}},B=U,F=(n("6b2f"),Object(v["a"])(B,H,J,!1,null,"18793be0",null)),G=F.exports;i["a"].use(j["a"]);var Q=[{path:"/",name:"AddCity",component:z},{path:"/weather/:city",name:"Weather",component:G}],V=new j["a"]({mode:"history",base:"/",routes:Q}),Y=V;i["a"].config.productionTip=!1,new i["a"]({router:Y,render:function(t){return t(A)}}).$mount("#app")},"5c0b":function(t,e,n){"use strict";n("9c0c")},"5dae":function(t,e,n){t.exports=n.p+"media/02d.fbf57056.mp4"},"65c4":function(t,e,n){t.exports=n.p+"media/10d.dd9c4f11.mp4"},"6b2f":function(t,e,n){"use strict";n("b172")},"6e15":function(t,e,n){t.exports=n.p+"media/03d.fbf57056.mp4"},"72ff":function(t,e,n){t.exports=n.p+"media/50n.dd9c4f11.mp4"},"777a":function(t,e,n){"use strict";n("192c")},"7c53":function(t,e,n){},"88e5":function(t,e,n){t.exports=n.p+"media/50d.dd9c4f11.mp4"},"9c0c":function(t,e,n){},a447:function(t,e,n){t.exports=n.p+"media/13n.33a65a7f.mp4"},b172:function(t,e,n){},b750:function(t,e,n){t.exports=n.p+"media/01d.0da1fbd1.mp4"},c266:function(t,e,n){t.exports=n.p+"media/01n.68cb9d4e.mp4"},c938:function(t,e,n){t.exports=n.p+"media/04n.d323b925.mp4"},cc21:function(t,e,n){t.exports=n.p+"media/09d.dd9c4f11.mp4"},db0b:function(t,e,n){"use strict";n("fa39")},ed81:function(t,e,n){"use strict";n("0022")},f3b4:function(t,e,n){var i={"./01d.mp4":"b750","./01n.mp4":"c266","./02d.mp4":"5dae","./02n.mp4":"4c58","./03d.mp4":"6e15","./03n.mp4":"0420","./04d.mp4":"0da8","./04n.mp4":"c938","./09d.mp4":"cc21","./09n.mp4":"0698","./10d.mp4":"65c4","./10n.mp4":"0cff","./11d.mp4":"417e","./11n.mp4":"f697","./13d.mp4":"54ef","./13n.mp4":"a447","./50d.mp4":"88e5","./50n.mp4":"72ff"};function a(t){var e=c(t);return n(e)}function c(t){if(!n.o(i,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return i[t]}a.keys=function(){return Object.keys(i)},a.resolve=c,t.exports=a,a.id="f3b4"},f697:function(t,e,n){t.exports=n.p+"media/11n.dd9c4f11.mp4"},fa39:function(t,e,n){}});
//# sourceMappingURL=app.9444b760.js.map